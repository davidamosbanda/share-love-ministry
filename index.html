<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S.H.A.R.E L.O.V.E | Home</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root { --royal-purple: #4b2c5e; --noble-white: #ffffff; --gold-accent: #d4af37; --soft-gray: #f8f9fa; }
        body, html { margin: 0; padding: 0; font-family: 'Inter', sans-serif; background: var(--noble-white); color: #333; overflow-x: hidden; }

        /* FIXED TOP RIGHT NAVIGATION */
        .nav-bar {
            position: fixed;
            top: 0; left: 0; width: 100%;
            display: flex;
            justify-content: flex-end;
            align-items: center;
            padding: 25px 50px;
            z-index: 1000;
            box-sizing: border-box;
            background: rgba(75, 44, 94, 0.15);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
        }
        .nav-links { display: flex; gap: 30px; }
        .nav-links a { 
            color: var(--noble-white); 
            text-decoration: none; 
            text-transform: uppercase; 
            font-size: 0.85rem; 
            letter-spacing: 2px; 
            font-weight: 600; 
            transition: 0.3s;
            border-bottom: 2px solid transparent;
            padding-bottom: 5px;
        }
        .nav-links a:hover { color: var(--gold-accent); border-bottom: 2px solid var(--gold-accent); }

        /* HERO SLIDER */
        .hero {
            position: relative;
            height: 100vh;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: var(--noble-white);
            text-align: center;
            overflow: hidden;
            background: var(--royal-purple); /* Background shows if no images load */
        }

        .slide {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background-size: cover;
            background-position: center;
            opacity: 0;
            transition: opacity 1.5s ease-in-out;
            z-index: 1;
        }

        .slide.active { opacity: 1; }

        .hero::after {
            content: "";
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.3);
            z-index: 2;
        }

        .hero-content {
            position: relative;
            z-index: 3;
            max-width: 90%;
        }

        .hero h1 {
            font-family: 'Playfair Display', serif;
            font-size: clamp(2.5rem, 8vw, 6rem);
            letter-spacing: 12px;
            margin: 0;
            text-transform: uppercase;
        }

        .hero p {
            font-size: 1.1rem;
            letter-spacing: 6px;
            text-transform: uppercase;
            margin-top: 15px;
            color: var(--gold-accent);
        }

        /* MISSION SECTION - COMPLETELY FLUID */
        .cta-section { padding: 120px 10%; text-align: center; background: var(--noble-white); }
        .cta-section h2 { font-family: 'Playfair Display'; font-size: 3rem; color: var(--royal-purple); margin-bottom: 20px; }
        
        #mission-body { 
            max-width: 800px; 
            margin: 0 auto 45px; 
            line-height: 2; 
            font-size: 1.3rem; 
            color: #444;
        }

        .btn-gold { 
            background: var(--gold-accent); color: var(--royal-purple); 
            padding: 18px 50px; text-decoration: none; font-weight: bold; 
            border-radius: 50px; display: inline-block; transition: 0.3s;
            text-transform: uppercase; letter-spacing: 2px;
        }
        .btn-gold:hover { transform: translateY(-3px); background: #eacb6a; }

        footer { background: var(--royal-purple); color: white; padding: 40px; text-align: center; font-size: 0.8rem; }
    </style>
</head>
<body>

    <nav class="nav-bar">
        <div class="nav-links">
            <a href="index.html">Home</a>
            <a href="who-we-are.html">Who We Are</a>
            <a href="media.html">Media</a>
            <a href="projects.html">Projects</a>
        </div>
    </nav>

    <section class="hero" id="hero-slider">
        <div class="hero-content">
            <h1 id="hero-title"></h1> <p id="hero-subtitle"></p> </div>
    </section>

    <section class="cta-section">
        <h2 id="mission-title"></h2> <p id="mission-body"></p> <a href="projects.html" class="btn-gold">View Our Projects</a>
    </section>

    <footer>
        <p id="footer-text">&copy; 2026 S.H.A.R.E L.O.V.E MINISTRY</p>
    </footer>

    <script>
        let currentSlide = 0;
        let slideInterval;

        // 1. DYNAMIC TEXT LOADER (No static backups)
        async function loadHomeContent() {
            try {
                // Fetch with cache-buster to ensure admin changes show immediately
                const response = await fetch('_content/home.json?t=' + Date.now());
                const data = await response.json();
                
                if(data.hero_title) document.getElementById('hero-title').innerText = data.hero_title;
                if(data.hero_subtitle) document.getElementById('hero-subtitle').innerText = data.hero_subtitle;
                if(data.hero_title) document.getElementById('mission-title').innerText = data.hero_title; // Links title to mission header
                if(data.mission) document.getElementById('mission-body').innerText = data.mission;
            } catch (e) {
                console.log("Waiting for CMS data...");
            }
        }

        // 2. CACHE-BUSTING SLIDER LOADER
        async function initSlider() {
            try {
                const response = await fetch('_content/slider.json?t=' + Date.now());
                const data = await response.json();
                const hero = document.getElementById('hero-slider');
                
                if (data.slides && data.slides.length > 0) {
                    // Wipe all old slides immediately
                    document.querySelectorAll('.slide').forEach(s => s.remove());
                    
                    data.slides.forEach((slide, index) => {
                        const div = document.createElement('div');
                        div.className = (index === 0) ? 'slide active' : 'slide';
                        
                        // Handle all image path variations (images/ folder)
                        let imgPath = slide.image;
                        if (!imgPath.startsWith('http') && !imgPath.startsWith('images/')) {
                            imgPath = 'images/' + imgPath;
                        }
                        
                        div.style.backgroundImage = `url('${imgPath}')`;
                        hero.insertBefore(div, hero.firstChild);
                    });
                    startRotation();
                }
            } catch (e) {
                console.log("Add slider photos in Admin to replace purple background.");
            }
        }

        function startRotation() {
            const slides = document.querySelectorAll('.slide');
            if (slides.length <= 1) return;
            
            clearInterval(slideInterval);
            slideInterval = setInterval(() => {
                slides[currentSlide].classList.remove('active');
                currentSlide = (currentSlide + 1) % slides.length;
                slides[currentSlide].classList.add('active');
            }, 5000);
        }

        window.onload = () => {
            loadHomeContent();
            initSlider();
        };
    </script>
</body>
</html>
